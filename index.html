<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<title>Cancellations</title>
		<!-- Reveal CSS -->
		<link rel="stylesheet" href="css/reveal.css">
		<!-- Theme used from Reveal JS-->
		<link rel="stylesheet" href="css/theme/black.css">
		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">
		<!--Font import-->
		<link href="https://fonts.googleapis.com/css?family=Oswald" rel="stylesheet">
		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section data-background-color="black">
					<img id="cog" src="assets/img/cog.png">
					<h1>Cancellations at<br>
						General Assembly</h1>
				</section>
				<section>
					<section>
						<h1>THE PROBLEM</h1>
					</section>
					<section>
						<p>Not all  enrolments start their course ...</p>
						<p>Around 17.82% of all students cancel before their first day.</p>
						<img src="assets/img/bar-chart.png"/>
					</section>
					<section>
						<p>> Classification problem: Enrolments either (1) cancel or (2) become students.</p>
						<p>> In the data, this is marked with a "CanceledDate" from which I needed to extrapolate a "Cancelled" column, with a Boolean response.</p>
						<p>> 'Cancelled' == <em>target variable</em>.</p>
					</section>
					<section>
						<h2>END GOALS:</h2>
						<h4>1. Know them</h4>
						<p>> To accurately predict whether a student will cancel from their course.</p>
						<p>Knowing whether a student is likely to cancel can help identify how many students will end up starting a course, helping us predict income and spend outgoings more accurately.</p>
						<h4>2. Stop them</h4>
						<p>>To explore any actionable insights in preventing cancellations.</p>
						<p>Of course, ideally we could stop cancellations from happening and all students who are enrolled will start their course. Perhaps a more realistic objective is to work towards preventing these students from enrolling in the first place.</p>
					</section>
				</section>
				<section>
					<section>
						<h1>THE SOLUTION</h1>
					</section>
					<section>
						<h2>FINDINGS</h2>
					</section>
				</section>
				<section>
					<section>
						<h1>THE PROCESS</h1>
					</section>
					<section>
						<h1>THE PROCESS</h1>
						<div style="float:left">
							<h6>STEP 1: EXPORT</h6>
							<h6>STEP 2: EXTRAPOLATE</h6>
							<h6>STEP 3: COMPLETE</h6>
							<h6>STEP 4: STREAMLINE</h6>
							<h6>STEP 5: DUMMY</h6>
						</div>
						<div style="float:right,">
							<h6>STEP 6: VISUALISE</h6>
							<h6>STEP 7: PICK A MODEL</h6>
							<h6>STEP 8: TUNE</h6>
							<h6>STEP 9: TEST</h6>
							<h6>STEP 10: REPEAT</h6>
						</div>
					</section>
					<section>
						<h3>EXPORTING THE DATA</h3>
						<p>Thankfully we have all our data in accessible tables through Looker, so exporting the data wasn't a massive task...</p>
						<p>Just downloading a CSV with 50,000 rows from Looker.</p>
						<div class="coding">enrolments = pd.read_csv("data/courses snap_sales_funnel 2017-07-05T1254.csv", low_memory=False)</div>
						<p>The variables we have on our data are wide-ranging but incomplete.</p>
						<p>It wasn't hard to get a lot of information, but finding data that was consistently <em>there</em> for all the rows was a different story.</p>
						<p>We ended up with some pretty nifty variables, including:
							<ul>
								<li>Metro - which city were they enrolled in?</li>
								<li>Enrolment date - when were they enrolled?</li>
								<li>Enrolment day - what day of the week did they enrol?</li>
								<li>Course - which course did they enrol in?</li>
								<li>Expected Payment - how did we expect them to pay?</li>
								<li>Application Type - how did they apply?</li>
								<li>Pardot Category - how did they find General Assembly?</li>
								<li>Days between Enrolment and Invoice - how long between being enrolled and their payment due date?</li>
								<li>Days between Enrolment and Start Date - how long between being enrolled and their course starting?</li>
								<li>Days between Lead and Enrolment - how long before they were enrolled?</li>
							</ul>
						</p>
					</section>
					<section>
						<h3>EXTRAPOLATING THE DATA</h3>
						<p>Some data I wanted wasn't in the data as it was exported. I needed to add these columns based on other variables.</p>
						<p>I added our target column - "Cancelled" based on other columns, as well as an "APAC" column for regional explorations.</p>
						<div class="coding">enrolments['Cancelled'] = enrolments.CanceledDate.notnull()<br>
							enrolments['APAC'] = enrolments['Metro'].isin(['sydney','melbourne','hong-kong','singapore','brisbane'])</div>
					</section>
					<section>
						<h3>COMPLETING THE DATA</h3>
						<p>As mentioned, most of the more recent data was fully complete, but some of the older rows had missing values.</p>
						<p>Some of the columns I just deleted because they'd been filled in a long time ago, but not since then.</p>
						<p>I cleared a lot of the missing data by limiting the data to post mid-2014 and pre mid-2017.</p>
						<div class="coding">enrolments = enrolments[enrolments.EnrolDate > 20140630]<br>
							enrolments = enrolments[enrolments.EnrolDate < 20170630]</div>
					</section>
					<section>
						<p>Other null values were relatively easy to fix using the mean or simply entering "Unknown" for categorical variables, e.g.  'Metro', 'Course', 'Type', 'ExpectedPayment', 'ApplicationType', 'PardotCategory', 'EnrolDay'.</p>
						<div class="coding">enrolments.DaysEnroltoStart.fillna(enrolments.DaysEnroltoStart.mean(), inplace=True)<br>
							enrolments.ExpectedPayment.fillna("Unknown", inplace=True)</div>
					</section>
					<section>
						<h3>STREAMLINING THE DATA</h3>
						<p>Some of the data categories - Pardot Category, Application Type and Expected Payment Method - had ad hoc entries as well as clear categories.</p>
						<p> I limited these to only those categories with over 100 entries.</p>
						<p>This got rid of entries with unusual entries without skewing the data.</p>
						<div class="coding">commonapptypes = enrolments.ApplicationType.value_counts().index[enrolments.ApplicationType.value_counts()>100]<br>
							enrolments = enrolments[enrolments.ApplicationType.isin(commonapptypes)]</div>
					</section>
					<section>
						<h3>DUMMYING THE DATA</h3>
						<p>Some algorithms will only accept numerical or boolean inputs, so the categorical data had to be 'dummied up'. </p>
						<p>This obviously created a lot more columns - I ended up with 103 columns and 39,524 rows.</p>
						<div class="coding">dummydata = pd.get_dummies(data=enrolments, columns = ['Metro','Course','Type','ExpectedPayment','ApplicationType','PardotCategory','EnrolDay'], prefix = ['Metro','Course','Type','ExpectedPayment','ApplicationType','PardotCategory','EnrolDay'] )<br>dummydata.shape<br>>(39524, 103)</div>
					</section>
					<section>
						<h3>VISUALISING THE DATA</h3>
						<p>I then did a bit of exploratory data and distilled some interesting insights into our enrolment data:</p>
					</section>
					<section>
						<h5>Cancellations by month</h5>
						<p>Although enrolment numbers are down, cancellations are steady:</p>
						<img src="assets/img/cancellations-by-month.png"/>
					</section>
					<section>
						<h4>Cancellations by metro</h4>
						<p>Sydney actually has a lower rate of cancellations than other metros:</p>
						<img src="assets/img/cancellations-by-metro.png"/>
					</section>
					<section>
						<h4>Payment methods</h4>
						<p>Students who are paying by private loan or on their own pocket are more likely to cancel than employer-paid:</p>
						<img src="assets/img/cancellations-by-pay-method.png"/>
					</section>
					<section>
						<h4>Days from Enrolment to Startdate</h4>
						<p>Students enrol close to the start date of their course: </p>
						<img src="assets/img/daysenroltostart-hist.png"/>
					</section>
					<section>
						<h3>CHOOSING THE MODEL</h3>
						<p>XYZ</p>
					</section>
					<section>
						<h3>TUNING THE MODEL</h3>
						<p>XYZ</p>
					</section>
					<section>
						<h3>TESTING THE MODEL</h3>
						<p>XYZ</p>
					</section>
					<section>
						<h3>REPEAT</h3>
						<p>XYZ</p>
					</section>
				</section>
				<section>
					<section>
						<h1>NEXT STEPS</h1>
					</section>
					<section>
						<h2>Vertical Slide 1</h2>
					</section>
				</section>
				<section data-background-color="black">
					<h1>Thank you!</h1>
				</section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>

		<script src="js/reveal.js"></script>

		<script>
			Reveal.initialize({
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>

